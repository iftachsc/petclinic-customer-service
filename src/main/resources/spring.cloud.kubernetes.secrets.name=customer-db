spring.cloud.kubernetes.secrets.name=customer-db
spring.cloud.kubernetes.reload.enabled=false
spring.cloud.kubernetes.reload.strategy=refresh


route for src/main/fabric8 folder for the plugin to pick
apiVersion: v1
kind: Route
metadata:
  name: ${project.artifactId}
spec:
  port:
    targetPort: 8088
  to:
    kind: Service
    name: ${project.artifactId}

fabric8
-------
mvn clean fabric8:deploy -Popenshift -DskipTests=true
mvn io.fabric8:fabric8-maven-plugin:3.5.37:setup

builds
------
oc start-build spring-petclinic-customers-service-s2i -n petclinic-develop
oc start-build --build-loglevel [0-5]

pruning & grabage collection
----------------------------
oc adm prune deployments --orphans --keep-complete=5 --keep-failed=1 \ --keep-younger-than=60m --confirm




minishift
---------
minishift openshift version list
minishift start --cpus 4 --memory 6144
minishift start --vm-driver=virtualbox --docker-env=openshift --openshift-version v3.7.2
oc login $(minishift ip):8443 -u admin -p admin

s2i spring boot - generated by fabric8
FROM fabric8/s2i-java:2.0
ENV JAVA_APP_DIR=/deployments
EXPOSE 8088 8778 9779
COPY maven /deployments/


issues:
-------
reosurce req/limit in fragments: https://github.com/fabric8io/fabric8-maven-plugin/issues/1185
https://github.com/fabric8io/fabric8-maven-plugin/pull/1261
reosurce fragments service without port
